import{_ as z}from"./DnFMIXCs.js";import{_ as B}from"./B-ZN2_Ln.js";import L from"./C6BX5lmX.js";/* empty css        */import{_ as c}from"./BCg2R6iM.js";import{c as _}from"./CwrragXr.js";import{U as $,a as H,r as h,o as N,R as b,d as P,x as C,B as n,z as S,L as q,N as t,C as g,Q as M,y as R,D as U,S as A,T as W}from"./sZQ7zPju.js";import{f as F}from"./C8CCQvmy.js";import"./DTFxBeDD.js";const j=$("useModuleActivityStore",()=>{const y=[{text:"Nama User",value:"nama"},{text:"Role",value:"role"},{text:"aktivitas",value:"aktivitas"},{text:"Waktu",value:"waktu"}],{$apiFetch:e}=H(),u=h([]),l=h(!0),a={id:0,nama:"",aktivitas:"",role:"",start_tanggal:"",end_tanggal:""},r=h(_(a));function f(s){r.value={id:s.id,nama:s.nama,role:s.role,aktivitas:s.aktivitas,start_tanggal:s.waktu,end_tanggal:s.waktu}}const d=async({nama:s="",aktivitas:p="",role:V="",start_tanggal:v="",end_tanggal:k=""}={})=>{const w={nama:s,aktivitas:p,start_tanggal:v,end_tanggal:k},x={};for(const m in w){const i=w[m];i!==""&&(x[m]=String(i))}const T=new URLSearchParams(x).toString();try{const m=await e(`/logs?${T}`);u.value=m,u.value=m.map(i=>({nama:i.User.nama||"",role:i.User.role||"user",waktu:i.waktu||"",aktivitas:i.aktivitas||"",id:i.id||0}))}catch{b().danger("Gagal memuat data!")}},o=async()=>{l.value=!0;const{nama:s,role:p,aktivitas:V,start_tanggal:v,end_tanggal:k}=r.value;await d({nama:s||"",role:p||"",aktivitas:V||"",start_tanggal:v||"",end_tanggal:k||""}),l.value=!1,b().success("Pencarian berhasil!")},D=async()=>{l.value=!0,r.value=_(a),d(),l.value=!1,b().success("Halaman telah di refresh!")};return N(()=>{d(),r.value=_(a),l.value=!1}),{fetchData:d,handleFind:o,handleClickRow:f,handleRefresh:D,form:r,headers:y,items:u,isLoading:l}}),O={class:"grid grid-cols-2 md:grid-cols-3 gap-2 py-2"},Y={class:"grid grid-cols-3 md:grid-cols-5 gap-2 py-2"},E={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"},ta=P({__name:"index",setup(y){const e=j();function u(l){e.handleClickRow(l);const a=document.querySelector("main"),r={behavior:"smooth"};a&&a.scrollTo({top:a.scrollHeight,...r})}return N(()=>{F("#tanggal-input",{enableTime:!0,enableSeconds:!0,dateFormat:"Y-m-d H:i:S",time_24hr:!0,onChange:(l,a)=>{e.form.waktu=a}}),F("#tanggal-akhir",{enableTime:!0,enableSeconds:!0,dateFormat:"Y-m-d H:i:S",time_24hr:!0,onChange:(l,a)=>{e.form.waktu=a}})}),(l,a)=>{const r=z,f=B,d=L;return R(),C(M,null,[n(r,{headers:t(e).headers,items:t(e).items,onClickRow:u,"is-loading":t(e).isLoading},null,8,["headers","items","is-loading"]),S("div",O,[n(c,{modelValue:t(e).form.nama,"onUpdate:modelValue":a[0]||(a[0]=o=>t(e).form.nama=o),label:"Nama",placeholder:""},null,8,["modelValue"]),n(f,{modelValue:t(e).form.role,"onUpdate:modelValue":a[1]||(a[1]=o=>t(e).form.role=o),label:"Role",placeholder:"---Pilih Role---",options:[{value:"admin",name:"Admin"},{value:"owner",name:"Owner"},{value:"user",name:"User"}]},null,8,["modelValue"]),n(c,{modelValue:t(e).form.aktivitas,"onUpdate:modelValue":a[2]||(a[2]=o=>t(e).form.aktivitas=o),label:"Aktivitas",placeholder:""},null,8,["modelValue"]),n(c,{modelValue:t(e).form.start_tanggal,"onUpdate:modelValue":a[3]||(a[3]=o=>t(e).form.start_tanggal=o),label:"Waktu Awal",id:"tanggal-input",placeholder:""},null,8,["modelValue"]),n(c,{modelValue:t(e).form.end_tanggal,"onUpdate:modelValue":a[4]||(a[4]=o=>t(e).form.end_tanggal=o),label:"Waktu Akhir",id:"tanggal-akhir",placeholder:""},null,8,["modelValue"])]),S("div",Y,[n(t(A),{shadow:"",gradient:"green",onClick:t(e).handleRefresh},{prefix:g(()=>[n(d,{name:"material-symbols:refresh",size:"18"})]),default:g(()=>[a[5]||(a[5]=U(" Refresh "))]),_:1,__:[5]},8,["onClick"]),n(t(A),{shadow:"",gradient:"purple",onClick:t(e).handleFind},{prefix:g(()=>[n(d,{name:"material-symbols:search",size:"18"})]),default:g(()=>[a[6]||(a[6]=U(" Find "))]),_:1,__:[6]},8,["onClick"])]),t(e).isLoading?(R(),C("div",E,[n(t(W),{color:"green",size:"12"})])):q("",!0)],64)}}});export{ta as default};
