import{_ as $}from"./DnFMIXCs.js";/* empty css        */import{_ as x}from"./BNTRmZPg.js";import{_ as b}from"./BCg2R6iM.js";import{c as _}from"./CwrragXr.js";import{U as N,a as R,r as g,o as V,R as i,d as S,x as y,B as p,z as U,L,N as s,Q as M,y as T,T as P}from"./sZQ7zPju.js";import"./DTFxBeDD.js";import"./C6BX5lmX.js";const B=N("useModuleTipeAkunStore",()=>{const k=[{text:"Nama Tipe",value:"nama_tipe"},{text:"No Tipe",value:"no_tipe"}],{$apiFetch:a}=R(),f=g([]),n=g(!0),r={id:0,nama_tipe:"",no_tipe:""},e=g(_(r));function m(c){e.value=c}const d=async({nama_tipe:c="",no_tipe:o=""}={})=>{const u={};c&&(u.nama_tipe=c),o&&(u.no_tipe=o);const l=new URLSearchParams(u).toString();try{const t=await a(`/tipe-akun?${l}`);f.value=t}catch{i().danger("Gagal memuat data")}},w=async()=>{n.value=!0;const{nama_tipe:c,no_tipe:o}=e.value;await d({nama_tipe:c||"",no_tipe:o||""}),n.value=!1,i().success("Pencarian berhasil!")},v=async()=>{n.value=!0,e.value=_(r),await d(),n.value=!1,i().success("Halaman telah di refresh!")},C=async()=>{var o,u,l;if(await i().confirmDialog(`Anda ingin membuat transaksi untuk akun ${e.value.nama_tipe}?`)){n.value=!0;try{const t=await a("/tipe-akun",{method:"POST",headers:{"Content-Type":"application/json"},body:{nama_tipe:e.value.nama_tipe,no_tipe:e.value.no_tipe}});e.value.id=t.data.id||0,await d(),n.value=!1,i().success("Tipe Akun berhasil dibuat!")}catch(t){const h=((l=(u=(o=t==null?void 0:t.data)==null?void 0:o.errors)==null?void 0:u[0])==null?void 0:l.message)||"Gagal membuat Tipe Akun.";n.value=!1,i().danger(h)}}},A=async()=>{var c,o,u;if(e.value.id===0){i().warning("Pilih salah satu data dalam tabel.");return}if(!(e.value.id!==0&&!await i().confirmDialog(`Anda yakin ingin mengubah tipe akun ${e.value.nama_tipe}?`))){n.value=!0;try{const l=await a(`/tipe-akun/${e.value.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:{nama_tipe:e.value.nama_tipe,no_tipe:e.value.no_tipe}});await d(),n.value=!1,i().success("Tipe Akun berhasil diperbarui!")}catch(l){const t=((u=(o=(c=l==null?void 0:l.data)==null?void 0:c.errors)==null?void 0:o[0])==null?void 0:u.message)||"Gagal mengubah Tipe Akun.";n.value=!1,i().danger(t)}}},D=async()=>{var o,u,l;if(!e.value.id){i().warning("Pilih data yang ingin dihapus.");return}if(await i().confirmDialog(`Yakin ingin menghapus tipe akun ${e.value.nama_tipe}?`)){n.value=!0;try{await a(`/tipe-akun/${e.value.id}`,{method:"DELETE"}),await d(),await v(),n.value=!1,i().success("Tipe Akun berhasil dihapus!"),e.value={id:0,nama_tipe:"",no_tipe:""}}catch(t){const h=((l=(u=(o=t==null?void 0:t.data)==null?void 0:o.errors)==null?void 0:u[0])==null?void 0:l.message)||"Data terhubung dengan tabel lain.";n.value=!1,i().danger(h)}}};return V(()=>{d(),e.value=_(r),n.value=!1}),{fetchData:d,handleDelete:D,handleUpdate:A,handleInsert:C,handleFind:w,handleClickRow:m,handleRefresh:v,form:e,headers:k,items:f,isLoading:n}}),j={class:"grid grid-cols-2 gap-2 py-2"},E={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"},Y=S({__name:"index",setup(k){const a=B();function f(n){a.handleClickRow(n);const r=document.querySelector("main"),e={behavior:"smooth"};r&&r.scrollTo({top:r.scrollHeight,...e})}return(n,r)=>{const e=$;return T(),y(M,null,[p(e,{headers:s(a).headers,items:s(a).items,"is-loading":s(a).isLoading,onClickRow:f},null,8,["headers","items","is-loading"]),U("div",j,[p(b,{modelValue:s(a).form.nama_tipe,"onUpdate:modelValue":r[0]||(r[0]=m=>s(a).form.nama_tipe=m),label:"Nama Tipe",placeholder:""},null,8,["modelValue"]),p(b,{modelValue:s(a).form.no_tipe,"onUpdate:modelValue":r[1]||(r[1]=m=>s(a).form.no_tipe=m),label:"No Tipe",type:"number",placeholder:""},null,8,["modelValue"])]),p(x,{"onClick:insert":s(a).handleInsert,"onClick:update":s(a).handleUpdate,"onClick:find":s(a).handleFind,"onClick:refresh":s(a).handleRefresh,"onClick:delete":s(a).handleDelete},null,8,["onClick:insert","onClick:update","onClick:find","onClick:refresh","onClick:delete"]),s(a).isLoading?(T(),y("div",E,[p(s(P),{color:"green",size:"12"})])):L("",!0)],64)}}});export{Y as default};
