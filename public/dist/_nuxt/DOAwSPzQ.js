import v from"./C6BX5lmX.js";import{J as w,r as d,a as _,o as S,K as V,x,z as a,L as M,M as I,B as l,N as m,O as C,P as L,D as b,C as T,Q as U,R as n,y as h,W as f,S as j,T as N}from"./sZQ7zPju.js";const P=w("/images/logo.svg"),R={class:"flex items-center justify-center min-h-screen bg-gray-100 dark:bg-gray-900 px-4"},z={class:"w-full max-w-md p-8 space-y-6 bg-white dark:bg-gray-800 shadow rounded-lg"},B={class:"flex items-center justify-between"},D={class:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-500"},F={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"},A={__name:"index",setup(H){const g=V(),o=d("difa123"),u=d(!1),c=d("password321"),r=d(!1),{$apiFetch:p}=_();S(()=>{r.value=localStorage.getItem("remember_me")==="true",localStorage.getItem("token")&&g.push("/dashboard")});const k=async()=>{o===""&&n().warning("Masukan username terlebih dahulu!");try{const s=await p(`/users/get-hint/${o.value}`,{method:"GET",headers:{"Content-Type":"application/json"}});n().success(`Hint : ${s.hint}`)}catch{n().danger("Tidak ada hint!")}},y=async()=>{var s;u.value=!0;try{const e=await p("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:{username:o.value,password:c.value,remember_me:r.value}});localStorage.setItem("token",e.token),localStorage.setItem("created_by",e.user.id),localStorage.setItem("nama_user",e.user.nama),localStorage.setItem("role_user",e.user.role),u.value=!1,n().success("Login berhasil!"),localStorage.setItem("remember_me",r.value),g.push("/dashboard")}catch(e){const i=(s=e==null?void 0:e.data)==null?void 0:s.status;let t="Gagal login.";i===102?t="Format username tidak sesuai.":i===103&&(t="username atau password salah."),u.value=!1,n().danger(t)}};return(s,e)=>{const i=v;return h(),x(U,null,[a("div",R,[a("div",z,[e[6]||(e[6]=a("div",{class:"text-center"},[a("img",{src:P,alt:"Logo",class:"w-16 h-16 mx-auto mb-2"}),a("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Selamat Datang"),a("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Silahkan login untuk melanjutkan")],-1)),a("form",{onSubmit:I(y,["prevent"]),class:"space-y-4 dark:text-white"},[l(m(f),{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value=t),type:"username",label:"Username",placeholder:"Masukkan Username",required:""},null,8,["modelValue"]),l(m(f),{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=t=>c.value=t),type:"password",label:"Password",placeholder:"Masukkan Password",required:""},null,8,["modelValue"]),a("div",B,[a("label",D,[C(a("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=t=>r.value=t),class:"rounded border-gray-300"},null,512),[[L,r.value]]),e[3]||(e[3]=a("span",null,"Remember me",-1))]),a("a",{onClick:k,class:"flex items-center gap-1 text-sm text-orange-500 hover:underline dark:text-green-400"},[l(i,{name:"mdi:lightbulb-on",size:"18",class:"text-amber-400"}),e[4]||(e[4]=b(" Show Password Hint "))])]),l(m(j),{type:"submit",color:"green",class:"w-full"},{default:T(()=>e[5]||(e[5]=[b("Login")])),_:1,__:[5]})],32)])]),u.value?(h(),x("div",F,[l(m(N),{color:"green",size:"12"})])):M("",!0)],64)}}};export{A as default};
